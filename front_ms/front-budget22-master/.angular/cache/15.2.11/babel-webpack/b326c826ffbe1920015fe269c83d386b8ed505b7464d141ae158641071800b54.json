{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport Swal from \"sweetalert2\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/BudgetServiceImpl\";\nimport * as i3 from \"../services/IncomeServiceImpl\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../sidebar/sidebar.component\";\nimport * as i7 from \"../navbar/navbar.component\";\nfunction AddBudgetComponent_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const income_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", income_r2.id)(\"selected\", income_r2.mois === ctx_r0.selectedMonth);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(income_r2.mois);\n  }\n}\nfunction AddBudgetComponent_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r3);\n  }\n}\nexport let AddBudgetComponent = /*#__PURE__*/(() => {\n  class AddBudgetComponent {\n    constructor(formBuilder, budgetService, incomeService, route, router) {\n      this.formBuilder = formBuilder;\n      this.budgetService = budgetService;\n      this.incomeService = incomeService;\n      this.route = route;\n      this.router = router;\n      this.incomes = []; // Store incomes here\n      this.categories = ['Food', 'Housing', 'Transportation', 'Utilities', 'Healthcare', 'Entertainment', 'Education', 'Savings', 'Other'];\n      this.selectedMonth = null;\n      this.budgetForm = this.formBuilder.group({\n        nomBudget: ['', Validators.required],\n        montantBudget: ['', Validators.required],\n        incomeId: ['', Validators.required],\n        categories: ['', Validators.required]\n      });\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        this.selectedMonth = params['month'];\n        if (this.selectedMonth) {\n          this.fetchIncomes();\n        }\n      });\n    }\n    fetchIncomes() {\n      this.incomeService.getIncomes().subscribe(data => {\n        this.incomes = data;\n        // Pre-select the income month based on the selected month\n        const selectedIncome = this.incomes.find(income => income.mois === this.selectedMonth);\n        if (selectedIncome) {\n          this.budgetForm.patchValue({\n            incomeId: selectedIncome.id\n          });\n        }\n      }, error => {\n        console.error('Error fetching incomes:', error);\n      });\n    }\n    onSubmit() {\n      if (this.budgetForm.invalid) {\n        return;\n      }\n      // Include the selected month when creating the budget\n      const newBudgetData = Object.assign(Object.assign({}, this.budgetForm.value), {\n        mois: this.selectedMonth\n      });\n      this.budgetService.createBudget(newBudgetData).subscribe(() => {\n        // Show success notification\n        Swal.fire({\n          icon: 'success',\n          title: 'Success!',\n          text: 'Budget added successfully!',\n          showConfirmButton: false,\n          timer: 1500\n        });\n        // Reset the form\n        this.budgetForm.reset();\n        // Optionally, redirect or perform any other action upon successful addition\n      }, error => {\n        // Show error notification\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Error adding budget!',\n          footer: error.message\n        });\n        console.error('Error adding budget:', error);\n      });\n    }\n    goBack() {\n      this.router.navigate(['/showincomes']);\n    }\n  }\n  AddBudgetComponent.ɵfac = function AddBudgetComponent_Factory(t) {\n    return new (t || AddBudgetComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ServiceBudget), i0.ɵɵdirectiveInject(i3.IncomeService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  AddBudgetComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddBudgetComponent,\n    selectors: [[\"app-add-budget\"]],\n    decls: 25,\n    vars: 3,\n    consts: [[1, \"row\"], [1, \"col-md-3\"], [1, \"container\"], [1, \"window\"], [1, \"overlay\"], [1, \"content\"], [1, \"welcome\"], [1, \"input-fields\", 3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"id\", \"nomBudget\", \"formControlName\", \"nomBudget\", \"placeholder\", \"Enter budget name\", 1, \"input-line\", \"full-width\"], [\"type\", \"number\", \"id\", \"montantBudget\", \"formControlName\", \"montantBudget\", \"placeholder\", \"Enter budget amount\", 1, \"input-line\", \"full-width\"], [\"id\", \"incomeId\", \"formControlName\", \"incomeId\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [1, \"form-group\"], [\"for\", \"categories\"], [\"id\", \"categories\", \"formControlName\", \"categories\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 1, \"ghost-round\", \"full-width\"], [\"type\", \"button\", 1, \"ghost-round\", \"full-width\", 3, \"click\"], [3, \"value\", \"selected\"], [3, \"value\"]],\n    template: function AddBudgetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1);\n        i0.ɵɵelement(3, \"app-sidebar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3);\n        i0.ɵɵelement(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6);\n        i0.ɵɵtext(9, \"Add your Budget\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"form\", 7);\n        i0.ɵɵlistener(\"ngSubmit\", function AddBudgetComponent_Template_form_ngSubmit_10_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelement(11, \"input\", 8)(12, \"input\", 9);\n        i0.ɵɵelementStart(13, \"select\", 10);\n        i0.ɵɵtemplate(14, AddBudgetComponent_option_14_Template, 2, 3, \"option\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 12)(16, \"label\", 13);\n        i0.ɵɵtext(17, \"Categories:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"select\", 14);\n        i0.ɵɵtemplate(19, AddBudgetComponent_option_19_Template, 2, 2, \"option\", 15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\")(21, \"button\", 16);\n        i0.ɵɵtext(22, \"Add\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function AddBudgetComponent_Template_button_click_23_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵtext(24, \"Back\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.budgetForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.incomes);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      }\n    },\n    dependencies: [i5.NgForOf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.SidebarComponent, i7.NavbarComponent],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css?family=Rubik:400,500&display=swap\\\";@import\\\"https://fonts.googleapis.com/css?family=Roboto:400,300,100,500\\\";.add-budget-form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:50px;background-color:#f9f9f9;border-radius:0}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Rubik,sans-serif}.left[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-wrap:wrap;flex-direction:column;justify-content:center;animation-name:_ngcontent-%COMP%_left;animation-duration:1s;animation-fill-mode:both;animation-delay:1s;max-width:280px}.right[_ngcontent-%COMP%]{flex:1;background-color:#000;transition:1s;background-size:cover;background-repeat:no-repeat;background-position:center;background-color:transparent;margin-left:-350px}.header[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{margin:0;color:#4f46a5}.header[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin-top:10px;font-weight:400;font-size:15px;color:#0006}.form[_ngcontent-%COMP%]{max-width:1000px;display:flex;flex-direction:column;border-right:3px;margin-top:-190px}.form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:right}.form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#000;font-size:14px}@keyframes _ngcontent-%COMP%_a3{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}.animation.a3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_a3 .5s ease-in-out}.form-field[_ngcontent-%COMP%]{height:46px;padding:0 4px;border:2px solid #ddd;border-radius:4px;font-family:Rubik,sans-serif;outline:0;transition:.2s;margin-top:20px}.form-field[_ngcontent-%COMP%]:focus{border-color:#0f7ef1}.form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:12px 10px;border:0;background:linear-gradient(to right,#de48b5 0%,#0097ff 100%);border-radius:3px;margin-top:10px;color:#fff;letter-spacing:1px;font-family:Rubik,sans-serif}.animation[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_move;animation-duration:.4s;animation-fill-mode:both;animation-delay:2s}.a1[_ngcontent-%COMP%]{animation-delay:2s}.a2[_ngcontent-%COMP%]{animation-delay:2.1s}.a3[_ngcontent-%COMP%]{animation-delay:2.2s}.a4[_ngcontent-%COMP%]{animation-delay:2.3s}.a5[_ngcontent-%COMP%]{animation-delay:2.4s}.a6[_ngcontent-%COMP%]{animation-delay:2.5s}@keyframes _ngcontent-%COMP%_move{0%{opacity:0;visibility:hidden;transform:translateY(-40px)}to{opacity:1;visibility:visible;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_left{0%{opacity:0;width:0}to{opacity:1;padding:20px 40px;width:440px}}.center-form[_ngcontent-%COMP%]{position:relative;top:50%;left:50%;transform:translate(-50%,-50%)}.row[_ngcontent-%COMP%]{display:flex}.col-md-3[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%}.col-md-9[_ngcontent-%COMP%]{flex:0 0 75%;max-width:75%}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;background-color:#007bff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.back-button[_ngcontent-%COMP%]{position:fixed;top:10px;right:10px;z-index:1000;background-color:#007bff;color:#fff;border:none;border-radius:50%;padding:8px;cursor:pointer;font-size:14px}.back-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;height:100%}input[_ngcontent-%COMP%]{border:none}button[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#ffffffa6}[_ngcontent-%COMP%]::-webkit-input-placeholder   .input-line[_ngcontent-%COMP%]:focus + [_ngcontent-%COMP%]::input-placeholder{color:#fff}.highlight[_ngcontent-%COMP%]{color:#fffc;font-weight:400;cursor:pointer;transition:color .2s ease}.highlight[_ngcontent-%COMP%]:hover{color:#fff;transition:color .2s ease}.spacing[_ngcontent-%COMP%]{flex-grow:1;height:120px;font-weight:300;text-align:center;margin-top:10px;color:#ffffffa6}.input-line[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff;transition:all .2s ease}.ghost-round[_ngcontent-%COMP%]{cursor:pointer;background:none;border:1px solid rgba(255,255,255,.65);border-radius:25px;color:#ffffffa6;align-self:flex-end;font-size:19px;font-size:1.2rem;font-family:roboto;font-weight:300;line-height:1.25em;margin-top:auto;margin-bottom:25px;transition:all .2s ease;height:40px}.ghost-round[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.15);color:#fff;transition:all .2s ease}.input-line[_ngcontent-%COMP%]{background:none;margin-bottom:10px;line-height:2.4em;color:#fff;font-family:roboto;font-weight:300;letter-spacing:0px;letter-spacing:.02rem;font-size:19px;font-size:1.2rem;border-bottom:1px solid rgba(255,255,255,.65);transition:all .2s ease}.full-width[_ngcontent-%COMP%]{width:100%}.input-fields[_ngcontent-%COMP%]{margin-top:25px}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:linear-gradient(rgba(136,137,138,0),rgba(46,81,133,0));height:100%;width:100%}.content[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px;display:flex;flex-flow:column;z-index:5;width:360px}.welcome[_ngcontent-%COMP%]{font-weight:200;margin-top:75px;text-align:center;font-size:40px;font-size:2.5rem;letter-spacing:0px;letter-spacing:.05rem}.subtitle[_ngcontent-%COMP%]{text-align:center;line-height:1em;font-weight:100;letter-spacing:0px;letter-spacing:.02rem}.menu[_ngcontent-%COMP%]{background:rgba(0,0,0,.2);width:100%;height:50px}.window[_ngcontent-%COMP%]{z-index:100;color:#fff;font-family:roboto;position:relative;display:flex;flex-flow:column;box-shadow:0 15px 50px 10px #0003;box-sizing:border-box;height:560px;width:360px;background:#fff;background:url(https://pexels.imgix.net/photos/27718/pexels-photo-27718.jpg?fit=crop&w=1280&h=823) top left no-repeat}.overlay[_ngcontent-%COMP%]{background:linear-gradient(#42669f,#36537e);opacity:.85;filter:alpha(opacity=85);height:560px;position:absolute;width:100%;z-index:1}.bold-line[_ngcontent-%COMP%]{background:#e7e7e7;position:absolute;top:0;bottom:0;margin:auto;width:100%;height:360px;z-index:1;opacity:.1;background:url(https://pexels.imgix.net/photos/27718/pexels-photo-27718.jpg?fit=crop&w=1280&h=823) left no-repeat;background-size:cover}@media (max-width: 500px){.window[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{width:100%;height:100%}}\"]\n  });\n  return AddBudgetComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}